PHP Analysis Project
===========

### Spring 2014 Members
* Brian Edmonds
* Crystal Lo

### Introduction
Our software parses PHP source code using HIPHOPVM, php compiler built by Facebook, and generates a CFG for each function of the source code.

### What Do You Need
1. Bytecode file(s) generated by HIPHOP
2. Graphviz (can be downloaded at http://www.graphviz.org/Download..php)

### Installation and run
1. Install HIPHOP and Java on your linux box
2. Download the cfg_php.zip
3. Unzip the compressed package and navigate to cfg_php/ 
4. run ./cfg_php.sh $1 
	where $1 is the local path to your php files
5. Your output .dot files will be in the graphviz directory, showing a CFG for every function in your PHP code


#Sample Output
	This program works correctly for the function.php code found in the test/ directory. You should see two .dot files generated for this php code.  

### What To Expect
* A folder named `Graphviz` created in the source code directory
* A .dot file that has a graphic representation of each CFG.

### Resources

Bytecode Specification for HipHop: https://github.com/facebook/hhvm/blob/master/hphp/doc/bytecode.specification

###More work needs to be done
* Global variables are currently ignored. See the VGetG command in the bytecode specification. The compiled bytecode does not provide an argument for variable position. Not sure about what to do with this.
* PHP custom class definitions are not supported. 
* Working on connecting the seperate CFGs for each function into an interconnected CFG
*Exception handling is generally unsupported. This includes the usage of the unwinder in the bytecode. The unwinder takes control of the program should an excpetion be thrown


#####Code Components
When initially parsing the bytedcode we organize the instructions into the following structure:
	
	Function: a php function implemented by the user. CFGs are built for each individual Function object. Function has multiple lines.
	
	Line: a single line in the Php source code. We keep track of the line number within the source code. A line has multiple bytecode instructions.
	
	Instruction: A bytecode intstruction generated by HIPHOP upon comiling the php source. Currently we 

1. CFG has
	BasicBlocks and Edges. List of definitions and Uses within the code

2. BasicBlocks has multiple instructions

